# Repository Guidelines

## Project Structure & Module Organization

- `src/`: TypeScript source for the flatpickr year dropdown plugin (entry: `src/plugin.ts`).
- `tests/`: Jest specs; mirror source filenames with `.test.ts`.
- `demo/`: Manual usage example; useful for quick visual checks.
- `dist/`: Built JS, CSS, and type declarations; generated by `npm run build` (do not edit directly).
- `build-css.cjs`, `vite.config.ts`, `tsconfig.json`: Build and tooling configs; keep changes minimal and documented.

## Build, Test, and Development Commands

```sh
npm run build         # Bundles JS via Vite and CSS via PostCSS/Sass
npm run lint          # ESLint over .ts/.js/.cjs
npm run type-check    # TypeScript noEmit verification
npm test              # Jest unit tests (jsdom)
npm run test:coverage # Jest with coverage report
npm run format:check  # Prettier formatting check
```

Run `npm run prepublishOnly` to execute the full gate (lint + type-check + test + build) before release.

## Coding Style & Naming Conventions

- Language: TypeScript (ES modules). Prefer explicit return types for exported functions; avoid `any`.
- Indentation: 2 spaces; keep lines concise.
- Naming: Functions camelCase; types/interfaces PascalCase; file names kebab-case or lowerCamel to match existing files.
- Formatting: Prettier defaults; let ESLint surface rule conflicts. Use `lint:fix`/`format` only when intentional.
- DOM helpers: Use typed helpers from flatpickr instances rather than casting to `any`.

## Testing Guidelines

- Framework: Jest with jsdom. Place tests in `tests/` and suffix with `.test.ts`.
- Cover boundary years for `start`/`end`, min/max date handling, and dropdown change events.
- Aim for clear arrange/act/assert structure; prefer descriptive test names (`handles minDate clamping`).
- Use coverage output in `coverage/` to spot gaps; keep behavior-focused assertions.

## Commit & Pull Request Guidelines

- Commits: Imperative, concise summaries (e.g., `Add year dropdown typing`); group related changes.
- Pull Requests: Include purpose, key changes, test commands run, and any UI/behavior screenshots or GIFs when relevant.
- Link related issues; call out breaking changes or API surface adjustments explicitly.

## Release & Artifact Notes

- Do not manually edit `dist/`; regenerate with `npm run build`.
- Validate type declarations via `npm run type-check` before publishing to ensure `dist/types` stays in sync.
