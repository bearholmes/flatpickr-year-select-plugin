{"version":3,"file":"flatpickr-year-select-plugin.umd.js","sources":["../src/plugin.ts"],"sourcesContent":["interface YearDropdownPluginConfig {\n  start?: number;\n  end?: number;\n  [key: string]: number | undefined;\n}\n\nconst yearDropdownPlugin = function (pluginConfig?: YearDropdownPluginConfig) {\n  const config: YearDropdownPluginConfig = {\n    start:\n      pluginConfig && pluginConfig.start !== undefined ? pluginConfig.start : 3,\n    end: pluginConfig && pluginConfig.end !== undefined ? pluginConfig.end : 3,\n  };\n\n  const currYear = new Date().getFullYear();\n\n  const yearWrapper = document.createElement(\"div\");\n  yearWrapper.classList.add(\"flatpickr-current-year\");\n  const yearDropdown = document.createElement(\"select\");\n  yearDropdown.classList.add(\"flatpickr-monthDropdown-years\");\n\n  //function (_year: number)\n  const createSelectElement = function (year: number) {\n    const start = config.start !== undefined ? year - config.start : year;\n    const end = config.end !== undefined ? year + config.end : year;\n\n    for (let i = start; i <= end; i++) {\n      const option = document.createElement(\"option\");\n      option.value = String(i);\n      option.text = String(i);\n      yearDropdown.appendChild(option);\n    }\n    yearDropdown.value = String(year);\n  };\n\n  return function (fp: any) {\n    if (!fp) return;\n    if (fp.config.minDate) {\n      const minDate = new Date(fp.config.minDate);\n      if (currYear >= minDate.getFullYear())\n        config.start = currYear - minDate.getFullYear();\n    }\n    if (fp.config.maxDate) {\n      const maxDate = new Date(fp.config.maxDate);\n      if (currYear <= maxDate.getFullYear())\n        config.end = maxDate.getFullYear() - currYear;\n    }\n\n    fp.yearSelectContainer = fp._createElement(\"div\", \"flatpickr-years\", \"\");\n\n    // fp.yearSelectContainer.tabIndex = -1;\n    createSelectElement(currYear);\n\n    yearDropdown.addEventListener(\"change\", function (evt) {\n      const target = evt.target as HTMLSelectElement;\n      if (!target) return;\n      const year = target.options[target.selectedIndex].value;\n\n      fp.changeYear(Number(year));\n      fp.redraw();\n    });\n\n    yearWrapper.append(yearDropdown);\n    fp.yearSelectContainer.append(yearWrapper);\n\n    return {\n      onReady: function onReady() {\n        const name = fp.monthNav.className;\n        const yearInputCollection =\n          fp.calendarContainer.getElementsByClassName(name);\n        const el = yearInputCollection[0];\n        if (!el) return;\n        el.parentNode.insertBefore(\n          fp.yearSelectContainer,\n          el.parentNode.firstChild\n        );\n\n        const start =\n          config.start !== undefined ? currYear - config.start : currYear;\n        const end = config.end !== undefined ? currYear + config.end : currYear;\n\n        if (!fp.config.minDate) fp.set(\"minDate\", `${start}-01-01`);\n        if (!fp.config.maxDate) fp.set(\"maxDate\", `${end}-12-31`);\n      },\n      onOpen: function onOpen(\n        _selectedDates: any,\n        _dateStr: any,\n        instance: { currentYear: any }\n      ) {\n        yearDropdown.value = String(instance.currentYear);\n      },\n      onYearChange: function onYearChange(\n        _selectedDates: any,\n        _dateStr: any,\n        instance: { currentYear: any }\n      ) {\n        yearDropdown.value = String(instance.currentYear);\n      },\n    };\n  };\n};\n\nexport default yearDropdownPlugin;\n"],"names":["yearDropdownPlugin","pluginConfig","config","currYear","yearWrapper","yearDropdown","createSelectElement","year","start","end","option","fp","minDate","maxDate","evt","target","name","el","_selectedDates","_dateStr","instance"],"mappings":"8NAMM,MAAAA,EAAqB,SAAUC,EAAyC,CAC5E,MAAMC,EAAmC,CACvC,MACED,GAAgBA,EAAa,QAAU,OAAYA,EAAa,MAAQ,EAC1E,IAAKA,GAAgBA,EAAa,MAAQ,OAAYA,EAAa,IAAM,CAAA,EAGrEE,EAAW,IAAI,KAAK,EAAE,YAAY,EAElCC,EAAc,SAAS,cAAc,KAAK,EACpCA,EAAA,UAAU,IAAI,wBAAwB,EAC5C,MAAAC,EAAe,SAAS,cAAc,QAAQ,EACvCA,EAAA,UAAU,IAAI,+BAA+B,EAGpD,MAAAC,EAAsB,SAAUC,EAAc,CAClD,MAAMC,EAAQN,EAAO,QAAU,OAAYK,EAAOL,EAAO,MAAQK,EAC3DE,EAAMP,EAAO,MAAQ,OAAYK,EAAOL,EAAO,IAAMK,EAE3D,QAAS,EAAIC,EAAO,GAAKC,EAAK,IAAK,CAC3B,MAAAC,EAAS,SAAS,cAAc,QAAQ,EACvCA,EAAA,MAAQ,OAAO,CAAC,EAChBA,EAAA,KAAO,OAAO,CAAC,EACtBL,EAAa,YAAYK,CAAM,CACjC,CACaL,EAAA,MAAQ,OAAOE,CAAI,CAAA,EAGlC,OAAO,SAAUI,EAAS,CACxB,GAAKA,EACD,IAAAA,EAAG,OAAO,QAAS,CACrB,MAAMC,EAAU,IAAI,KAAKD,EAAG,OAAO,OAAO,EACtCR,GAAYS,EAAQ,YAAY,IAC3BV,EAAA,MAAQC,EAAWS,EAAQ,YAAY,EAClD,CACI,GAAAD,EAAG,OAAO,QAAS,CACrB,MAAME,EAAU,IAAI,KAAKF,EAAG,OAAO,OAAO,EACtCR,GAAYU,EAAQ,YAAY,IAC3BX,EAAA,IAAMW,EAAQ,YAAA,EAAgBV,EACzC,CAEA,OAAAQ,EAAG,oBAAsBA,EAAG,eAAe,MAAO,kBAAmB,EAAE,EAGvEL,EAAoBH,CAAQ,EAEfE,EAAA,iBAAiB,SAAU,SAAUS,EAAK,CACrD,MAAMC,EAASD,EAAI,OACnB,GAAI,CAACC,EAAQ,OACb,MAAMR,EAAOQ,EAAO,QAAQA,EAAO,aAAa,EAAE,MAE/CJ,EAAA,WAAW,OAAOJ,CAAI,CAAC,EAC1BI,EAAG,OAAO,CAAA,CACX,EAEDP,EAAY,OAAOC,CAAY,EAC5BM,EAAA,oBAAoB,OAAOP,CAAW,EAElC,CACL,QAAS,UAAmB,CACpB,MAAAY,EAAOL,EAAG,SAAS,UAGnBM,EADJN,EAAG,kBAAkB,uBAAuBK,CAAI,EACnB,CAAC,EAChC,GAAI,CAACC,EAAI,OACTA,EAAG,WAAW,aACZN,EAAG,oBACHM,EAAG,WAAW,UAAA,EAGhB,MAAMT,EACJN,EAAO,QAAU,OAAYC,EAAWD,EAAO,MAAQC,EACnDM,EAAMP,EAAO,MAAQ,OAAYC,EAAWD,EAAO,IAAMC,EAE1DQ,EAAG,OAAO,SAASA,EAAG,IAAI,UAAW,GAAGH,CAAK,QAAQ,EACrDG,EAAG,OAAO,SAASA,EAAG,IAAI,UAAW,GAAGF,CAAG,QAAQ,CAC1D,EACA,OAAQ,SACNS,EACAC,EACAC,EACA,CACaf,EAAA,MAAQ,OAAOe,EAAS,WAAW,CAClD,EACA,aAAc,SACZF,EACAC,EACAC,EACA,CACaf,EAAA,MAAQ,OAAOe,EAAS,WAAW,CAClD,CAAA,EACF,CAEJ"}